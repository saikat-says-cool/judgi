# ðŸš€ JudgiAI MVP Next Steps: Remaining Features, Optimizations, and Future Considerations

This document outlines the next phases of development for JudgiAI, building upon the current MVP progress. It covers features still needed for the core MVP, areas for optimization, and potential future enhancements.

---

## Phase 1: Remaining Features for MVP (DONE)

The core functionalities for the MVP are largely in place, but a few key aspects from the initial specification still need to be fully realized:

### 1.1 Structured Responses with Citations in Research Chat (DONE)
*   **Goal**: The Research Chat should provide structured responses that clearly include citations and case summaries.
*   **Current Status**: The AI is capable of performing research and considering citations, and the research results are injected into the AI's prompt. However, the user interface for the chat currently displays the AI's response as a general Markdown output. It doesn't explicitly render citations as distinct, clickable, or specially formatted elements within the chat messages themselves.
*   **Action Needed**: Enhance the chat message rendering to parse and display citations from the AI's response in a structured and user-friendly manner. This might involve specific Markdown parsing or AI output formatting to highlight citations.

### 1.2 "Save Findings to Canvas" from Research Chat (DONE)
*   **Goal**: Users should be able to save specific findings or summaries from the Research Chat directly into their Copilot Canvas workspace.
*   **Current Status**: The AI in the Canvas Assistant can modify the document, but there's no direct mechanism or button in the main Research Chat to explicitly transfer a piece of information (e.g., a case summary generated by the AI) to a document in the Canvas.
*   **Action Needed**: Implement a user interface element (e.g., a "Save to Canvas" button or a context menu option) within the Research Chat that allows users to select and transfer AI-generated content to an existing or new document in the Canvas.

### 1.3 AI-Assisted Drafting Features in Copilot Canvas (DONE)
*   **Goal**: The Copilot Canvas should offer advanced AI assistance beyond just replacing or appending content. This includes auto-completion, suggesting precedents, reformatting drafts, and auto-generating footnotes/citations.
*   **Current Status**: The AI can replace or append content to the canvas, and it has access to research results.
    *   **Auto-completes arguments based on context**: This implies interactive suggestions as the user types.
    *   **Suggests relevant precedents while typing**: Similar to auto-completion, but specifically for legal precedents.
    *   [x] **Reformats drafts into proper legal language or structure**: Implemented a "Drafting Actions" dropdown in the Canvas AI Assistant, allowing users to trigger AI actions like "Summarize Document", "Draft as Petition", "Improve Legal Language", and "Expand Last Section". These actions send specific prompts to the AI to modify the document content.
    *   [x] **Refined Approach for Auto-completion and Precedent Suggestions (MVP)**: Instead of real-time "while typing" features, which are complex for an MVP, we will implement these as **on-demand drafting actions** within the Canvas AI Assistant. This provides valuable AI assistance without the technical overhead and potential instability of deep editor integrations.
        *   [x] **Action Needed (On-demand Argument Completion)**: Added a "Suggest Next Argument" action to the Drafting Actions dropdown.
        *   [x] **Action Needed (On-demand Precedent Suggestions)**: Added a "Suggest Precedents for Document" action to the Drafting Actions dropdown.
    *   [x] **Auto-generates footnotes/citations**: Implemented a "Generate Footnotes/Citations" action in the Drafting Actions dropdown, which prompts the AI to review the document and insert appropriate citations.
*   **Action Needed**: All core AI-assisted drafting features for the MVP are now implemented as on-demand actions.

---

## Phase 2: Optimizations and Improvements

Beyond the remaining MVP features, several areas can be optimized or improved for a better user experience and more robust application:

### 2.1 User Profile Management UI (DONE)
*   **Current Status**: The system fetches the user's country from their profile for contextual AI responses, but there is no user interface for users to view or update their profile information (like first name, last name, avatar URL, or country).
*   [x] **Action Needed**: Create a dedicated profile settings page or component where users can manage their profile details.

### 2.2 Additional Authentication Providers (DONE)
*   **Current Status**: The login page uses Supabase Auth UI, but currently only supports email/password. The MVP spec mentioned "email / Google".
*   [x] **Action Needed**: Configure the Supabase Auth UI to include Google (or other desired OAuth providers) for easier sign-up and login.

### 2.3 Performance for Large Documents (DONE)
*   **Current Status**: The `RichTextEditor` handles content as HTML. For very large legal documents, the performance of the editor and the state management for `writingContent` might become a concern.
*   [x] **Action Needed**: Implemented debounced content updates for the `RichTextEditor` in `CanvasEditorPage.tsx` to reduce the frequency of state updates and auto-saves while typing, improving overall performance.

### 2.4 Enhanced AI Response Latency Feedback (DONE)
*   **Current Status**: We have "JudgiAI is thinking..." and specific document action messages.
*   [x] **Action Needed**: For "Deep Think" and "Deeper Research" modes, consider providing more granular feedback on what the AI is doing (e.g., "Searching legal databases...", "Analyzing cases...", "Synthesizing information...") to manage user expectations during longer processing times. Implemented `onStatusUpdate` callback in `getLongCatCompletion` and integrated into `CanvasAIAssistant` and `ChatPage` to display detailed messages.

### 2.5 AI Awareness of Current Date and Time (DONE)
*   **Goal**: Ensure the AI is aware of the current date and time to provide more contextually relevant responses.
*   [x] **Action Needed**: Injected the current date and time into the AI's system prompt in `src/services/longcatApi.ts`.

### 2.6 Accessibility Review
*   **Current Status**: `shadcn/ui` provides a good foundation, but custom components and interactions might have accessibility gaps.
*   **Action Needed**: Conduct a thorough accessibility audit to ensure the application is usable by individuals with disabilities, covering keyboard navigation, screen reader compatibility, color contrast, and ARIA attributes.

### 2.7 Robust Error Handling and User Feedback
*   **Current Status**: `showError` toasts are used for basic error reporting.
*   **Action Needed**: Implement more detailed and user-friendly error messages, potentially with options for users to report issues or retry actions. Enhance logging for better debugging of complex AI interactions.

### 2.8 Code Maintainability and Scalability
*   **Current Status**: The codebase is growing with new features.
*   **Action Needed**: Regularly review and refactor components, hooks, and services to ensure clear separation of concerns, reduce coupling, and improve overall maintainability as the application scales.

### 2.9 AI Output Styling Integration
*   **Current Status**: The AI output font family is applied as an inline style when content is inserted into the `RichTextEditor`.
*   **Action Needed**: Explore if this styling can be managed more robustly through TipTap's schema or custom CSS classes rather than inline styles, for better consistency and easier modification.

---

## Phase 3: Future Considerations (Beyond Immediate MVP)

These are features that could significantly enhance the application but are likely beyond the immediate MVP scope:

### 3.1 Advanced Export Options
*   Customizable export templates (e.g., specific legal formats).
*   Option to include chat history alongside the document content in exports.

### 3.2 Document Version Control
*   Implement a system to track changes to documents, allowing users to view and revert to previous versions.

### 3.3 Collaboration Features
*   Enable multiple users to view, edit, or comment on documents and conversations.
*   Sharing documents with specific permissions.

### 3.4 Integration with External Legal Databases
*   Direct integration with popular Indian legal databases (e.g., Manupatra, SCC Online) for more targeted and comprehensive research.

### 3.5 Advanced AI Capabilities
*   Summarization of very long documents or case law.
*   Sentiment analysis of legal texts.
*   Automated contract review and clause extraction.

### 3.6 User Feedback and Rating System
*   Allow users to rate the quality of AI responses and document suggestions to help improve the AI model over time.